<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <title>Movilidad Académica Internacional</title>
    <link rel="stylesheet" href="css/jvectormap.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/estilos.css">
  </head>
  <body>
    <div class="MainContainer">
      <header class="header-index">
        <div class="header-index-container ">
          <div class="header-title-container">
            <img class="header-politecnico-logo" src="https://lh3.googleusercontent.com/te1s5pxh3EIAGpEwUkNVF_vUotjAxpbmSBndZzDV13wFdpqzt5a5qoVU_4xl7EHsKwE1FTVeL6IiOyDiWBR8ABYqobISqYY3B9Q7I3B6AcZ_WNHOAzg_XcpLYu0Kqd1dxynkWj8Wng=w2400">
            <p class="p-instituto">Instituto Politécnico Nacional</p>
          </div>
          <div class="header-internacional">
            <p class="header-internacional-texto">Movilidad Académica Internacional</p>
          </div>
        </div>
      </header>
      <section class="world-container">
        <div class="world-container-title">
          <div class="world-guia">
            <p class="world-guia-text">Guía de Seguimiento</p>
            <span class="icon-clipboard1"></span>
          </div>
          <div class="world-formalizacion">
            <p class="world-formalizacion-text">Formalización de Pagos</p>
            <span class="icon-dollar"></span>
          </div>
          <div class="world-exito">
            <p class="world-exito-text">Casos de Éxito</p>
            <span class="icon-medal"></span>
          </div>
          <div class="world-s">
            <p class="world-container-selection">Selecciona un país</p>
          </div>
        </div>
         <div id="world-map"></div>
      </section>
      <section class="universities-container invisible">
        <!-- <div class="universities-container-gradient"></div> -->
        <div class="universities-decoration"></div>
        <div class="universities">
          <!-- <div class="university university-length-35">
            <p class="university-name">Universidad Politecnica de Madrid</p>
          </div>
          <div class="university university-length-35">
            <p class="university-name">Universidad Politecnica de Barcelona</p>
          </div>
          <div class="university university-length-35">
            <p class="university-name">Universidad Politecnica de Madrid</p>
          </div> -->
        </div>
        <div class="country">
          <p class="country-name">Universidades en España</p>
          <div class="">
            <p class="country-useful-link" href="#">Directorio del país</p>
          </div>
        </div>
      </section>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script type="text/javascript" src="js/maps/jvectormap.min.js"></script>
    <script type="text/javascript" src="js/maps/world.js"></script>
    <script type="text/javascript">
      $(function(){

        $('.world-s').click(() => {
            $('html, body').animate({
                scrollTop: $('.world-container-title').offset().top
            }, 300);
        });


        // var plants = [
        //     {name: 'EUA', coords: [50.9030599, 6.4213693], status: 'mrk'}
        //   ];

        var more_info = {
          {{ MORE_INFO }}
          // ES: {
          //   'schools': [
          //     'Universidad Autónoma de Barcelona',
          //     'Universidad de Alicante',
          //     'Universidad de Almería',
          //     'Universidad de Oviedo',
          //     'Universidad de Santiago de Compostela',
          //     'Universidad del País Vasco',
          //     'Universidad del Rey Juan Carlos',
          //     'Universidad Politécnica de Cataluña',
          //     'Universidad Politécnica de Madrid',
          //     'Universidad Politécnica de Valencia'
          //   ],
          //   'links': [
          //     '#',
          //     '#',
          //     '#',
          //     '#',
          //     '#',
          //     '#',
          //     '#',
          //     '#',
          //     'paginas/plantilla.html',
          //     '#'
          //   ],
          //   'isLarge': true
          // },
          // CA: {
          //   'schools': [
          //     "Bishop's University",
          //     "École de Technologie Supérieure",
          //     "École Polytechnique de Montreal",
          //     "Regina's University"
          //   ],
          //   'isLarge': false
          // }
        };

        var countries = {
            {{ COUNTRIES }}
        }

        var colors = {};

        for(let key in countries){
          colors[key] = '#5D0227';
        }


        mapObj = new jvm.Map({
          container: $('#world-map'),
          map: 'world_mill',
          backgroundColor: 'rgba(193, 193, 193, 0.4)',
          zoomOnScroll: false,
          // markers: plants.map(function(h){ return {name: h.name, latLng: h.coords} }),
          series: {
            regions: [{
            values: colors
          }],
            // markers: [{
            //   attribute: 'image',
            //   scale: {
            //     'mrk': 'marker.png'
            //   },
            //   values: plants.reduce(function(p, c, i){ p[i] = c.status; return p }, {})
            // }]
          },
          // colors: colors,
          hoverOpacity: 0.7, // opacity for :hover
        	hoverColor: false,
          onRegionTipShow: function(event, label, code){
            if(code in countries)
              label.html(countries[code]);
            else
              event.preventDefault();
         },
         onRegionClick: function(event, code){
            if( !(code in more_info) )
              return null;
            $('.universities-container').removeClass('invisible');
            let c = more_info[code];
            let $container = $('.universities');
            let i = 0;
            $container.html('');
            c.schools.forEach(function(school){
              $container.append(
                '<a href="'+ ((c.links[i] !== '#') ? (c.links[i] + '"') : '#"') +'class="university ' + ((c.isLarge) ? 'university-length-35':'university-length-100') + '">' +
                '<p class="university-name"> ' + school + ' </p>' +
                '</a>'
              );
              i += 1;
            });
            $('.country-name').html('Universidades en ' + countries[code]);
            $('html, body').animate({
               scrollTop: $('.universities-container').offset().top
             }, 300);
         }
        });
      });

    </script>
  </body>
</html>
